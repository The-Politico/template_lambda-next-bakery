{"ast":null,"code":"import _parseFloat from \"@babel/runtime-corejs2/core-js/parse-float\";\nimport _Object$getPrototypeOf from \"@babel/runtime-corejs2/core-js/object/get-prototype-of\";\nimport _Object$setPrototypeOf from \"@babel/runtime-corejs2/core-js/object/set-prototype-of\";\nimport _Object$create from \"@babel/runtime-corejs2/core-js/object/create\";\nimport _Object$assign from \"@babel/runtime-corejs2/core-js/object/assign\";\nimport _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport './index.css';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport path from 'path';\nimport find from 'lodash/find';\nimport capitalize from 'lodash/capitalize';\nimport assign from 'lodash/assign';\nimport classnames from 'classnames';\nimport { autoInitFrames } from '@newswire/frames';\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n\n    _Object$defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    _Object$defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _extends() {\n  _extends = _Object$assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = _Object$create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = _Object$setPrototypeOf ? _Object$getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || _Object$getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = _Object$setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nvar styles = {\n  \"styles\": \"politico_style_sketch___1ByAqFNLip\"\n};\n\nvar Home = function Home() {\n  return React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 100 100\",\n    enableBackground: \"new 0 0 100 100\",\n    xmlSpace: \"preserve\"\n  }, React.createElement(\"path\", {\n    d: \"M79.5,81.458h-57V41.27L51,16.729L79.5,41.27V81.458z M25.5,78.458h51V42.646L51,20.688L25.5,42.646V78.458z\"\n  }));\n};\n\nvar Navigation = function Navigation(props) {\n  return React.createElement(\"nav\", {\n    className: classnames('global', styles.styles)\n  }, React.createElement(\"div\", {\n    className: \"header-left bt-icon--house\"\n  }, React.createElement(\"a\", {\n    href: props.homeLink\n  }, React.createElement(Home, null))), React.createElement(\"b\", {\n    className: \"bt-icon bt-icon--politico\"\n  }), React.createElement(\"span\", {\n    className: \"project-name\"\n  }, \"/ \", React.createElement(\"a\", {\n    href: props.appLink\n  }, props.appName)), React.createElement(\"div\", {\n    className: \"float-right\"\n  }, React.createElement(\"ul\", {\n    className: \"nav nav-pills\"\n  }, props.children)));\n};\n\nNavigation.defaultProps = {\n  appLink: './',\n  appName: 'New project',\n  homeLink: './../'\n};\nvar styles$1 = {\n  \"fill-politico-red\": \"politico_style_sketch___1GpeDIKTuN\",\n  \"courier\": \"politico_style_sketch___3f4-i4le3Y\",\n  \"fancy-serif\": \"politico_style_sketch___2VFRDVzD8u\",\n  \"styles\": \"politico_style_sketch___12VDiRAoae\",\n  \"spinAround\": \"politico_style_sketch___YCO3b7SQZc\"\n};\n\nvar Select = function Select(props) {\n  var inputProps = _Object$assign({}, props);\n\n  delete inputProps.help;\n  delete inputProps.label;\n  delete inputProps.wrapperClassName;\n  delete inputProps.options;\n  delete inputProps.placeholder;\n  return React.createElement(\"div\", {\n    id: \"container-\".concat(props.id),\n    className: classnames('field', props.wrapperClassName, styles$1.styles)\n  }, props.label.length > 0 && React.createElement(\"label\", {\n    className: \"label\",\n    id: \"label-\".concat(props.id),\n    htmlFor: props.id\n  }, props.label), React.createElement(\"div\", {\n    className: classnames('control is-expanded', {\n      error: props.error\n    })\n  }, React.createElement(\"div\", {\n    className: classnames('select', {\n      'is-multiple': inputProps.multiple\n    })\n  }, React.createElement(\"select\", _extends({\n    value: props.value\n  }, inputProps, {\n    className: classnames(props.className, 'input')\n  }), React.createElement(\"option\", {\n    disabled: true,\n    hidden: true,\n    key: \"0\",\n    value: \"\"\n  }, props.placeholder), props.options.map(function (option, idx) {\n    return React.createElement(\"option\", {\n      key: idx + 1,\n      value: option.id\n    }, option.label);\n  })))), props.help.length > 0 && React.createElement(\"p\", {\n    id: \"help-\".concat(props.id),\n    className: classnames('help', {\n      error: props.error\n    })\n  }, props.help));\n};\n\nSelect.defaultProps = {\n  id: '',\n  className: '',\n  wrapperClassName: '',\n  help: '',\n  label: '',\n  value: '',\n  placeholder: '',\n  options: [],\n  error: false\n};\nSelect.propTypes = {\n  id: PropTypes.string,\n  className: PropTypes.string,\n  wrapperClassName: PropTypes.string,\n  help: PropTypes.string,\n  error: PropTypes.bool,\n  label: PropTypes.string,\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.array]),\n  placeholder: PropTypes.string,\n  options: PropTypes.array,\n  autofocus: PropTypes.bool,\n  disabled: PropTypes.bool,\n  multiple: PropTypes.bool,\n  name: PropTypes.string,\n  onChange: PropTypes.func,\n  required: PropTypes.bool,\n  size: PropTypes.number\n};\n\nvar Desktop = function Desktop(props) {\n  return React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 90 88.2\"\n  }, React.createElement(\"path\", {\n    d: \"M82.89,0H7.1A7.12,7.12,0,0,0,0,7.11V62.05a7.12,7.12,0,0,0,7.1,7.11H34.39v3.73c0,3.36-4.07,8.31-5.64,9.93s-1.34,3-1.07,3.62S28.76,88.2,31,88.2H59c2.27,0,3.07-1.11,3.35-1.76s.5-2-1.07-3.62-5.64-6.57-5.64-9.93V69.16H82.9A7.12,7.12,0,0,0,90,62.05V7.11A7.12,7.12,0,0,0,82.89,0ZM4.74,50.07V4.79H85.26V50.07Z\"\n  }));\n};\n\nvar Full = function Full(props) {\n  return React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 32 32\"\n  }, React.createElement(\"path\", {\n    d: \"M16.59,12.59a1,1,0,0,0,0-1.42l-6-6L14,1.71A1,1,0,0,0,14.3,1a1,1,0,0,0-.08-.38A1,1,0,0,0,13.3,0H1A1,1,0,0,0,0,1V13.3a1,1,0,0,0,.62.92A1,1,0,0,0,1.71,14l3.44-3.44,6,6a1,1,0,0,0,.71.29,1,1,0,0,0,.7-.29Z\"\n  }), React.createElement(\"path\", {\n    d: \"M32,31V18.7a1,1,0,0,0-.62-.92,1,1,0,0,0-1.09.21l-3.44,3.45-6-6a1,1,0,0,0-.71-.29,1.05,1.05,0,0,0-.71.29l-4,4a1.05,1.05,0,0,0-.29.71,1,1,0,0,0,.29.71l6,6L18,30.29a1,1,0,0,0-.3.71,1,1,0,0,0,1,1H31A1,1,0,0,0,32,31Z\"\n  }));\n};\n\nvar Mobile = function Mobile(props) {\n  return React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 55.4 95.2\"\n  }, React.createElement(\"path\", {\n    d: \"M55.3,58.3V88.1a10.39,10.39,0,0,1-.7,3.5,5.48,5.48,0,0,1-2.5,2.7,7.4,7.4,0,0,1-3.6.9H7.5a8.71,8.71,0,0,1-4.4-1.1c-.2-.1-.5-.3-.7-.4A5.83,5.83,0,0,1,0,89.2V7.2C0,4.8.6,2.7,2.6,1.3A2,2,0,0,1,3.4.9,8.6,8.6,0,0,1,7.3,0H49.8c4.1.9,5.7,3.9,5.6,7.9-.1,9.6,0,19.3-.1,28.9M50.9,11.1v-1H4.5v73H50.8V81.9c0-8.2,0-16.3-.1-24.5M30.9,88.7a3.16,3.16,0,0,0-3.2-3.2,3.25,3.25,0,0,0,0,6.5A3.45,3.45,0,0,0,30.9,88.7ZM27.7,4.5H21.3c-.6,0-1.1.1-1.1.8s.5.7,1.1.7H34.2c.5,0,1.1-.1,1.1-.7s-.5-.8-1.1-.8Z\"\n  }));\n};\n\nvar Tablet = function Tablet(props) {\n  return React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 90 62\"\n  }, React.createElement(\"path\", {\n    d: \"M0,54a8,8,0,0,0,8,8H82a8,8,0,0,0,8-8V8a8,8,0,0,0-8-8H8A8,8,0,0,0,0,8Zm8,4V4H78V58ZM80,31a4,4,0,1,1,4,4A4,4,0,0,1,80,31Z\"\n  }));\n};\n\nvar styles$2 = {\n  \"fill-politico-red\": \"politico_style_sketch___17PbpldjsD\",\n  \"styles\": \"politico_style_sketch___1Fo1qpAyuA\"\n};\nvar PRESET_SIZES = [{\n  size: '100%',\n  Icon: Full\n}, {\n  size: '1200px',\n  Icon: Desktop\n}, {\n  size: '720px',\n  Icon: Tablet\n}, {\n  size: '400px',\n  Icon: Mobile\n}];\n\nvar getPageOptionsFromProps = function getPageOptionsFromProps(props) {\n  var pages = props.pages;\n  return pages.map(function (p) {\n    return {\n      id: path.join('../', p, 'index.html'),\n      label: p === '' ? 'index' : p.substring(0, p.length - 1)\n    };\n  }).filter(function (p) {\n    return p.label !== 'preview';\n  });\n};\n\nvar EmbedPreview =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(EmbedPreview, _React$Component);\n\n  function EmbedPreview(props) {\n    var _this;\n\n    _classCallCheck(this, EmbedPreview);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(EmbedPreview).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"eslintFix\", function () {\n      console.log(_this.props.pages);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getDisplayOptions\", function () {\n      return _this.state.options.map(function (opt) {\n        var display = assign({}, opt);\n        display.label = capitalize(display.label);\n        return display;\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getPathFromName\", function (name) {\n      var option = find(_this.state.options, function (opt) {\n        return opt.label === name;\n      });\n\n      if (option) {\n        return option.id;\n      }\n\n      return null;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getNameFromPath\", function (ePath) {\n      var option = find(_this.state.options, function (opt) {\n        return opt.id === ePath;\n      });\n\n      if (option) {\n        return option.label;\n      }\n\n      return null;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSelectEmbed\", function (e) {\n      var ePath = e.target.value;\n\n      _this.setState({\n        embed: _this.getNameFromPath(ePath)\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSizeInputChange\", function (e) {\n      _this.setState({\n        size: e.target.value\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSizeInputKeyDown\", function (e) {\n      var currentSize = _this.state.size;\n\n      var value = _parseFloat(currentSize);\n\n      var unit = currentSize.split(\"\".concat(value))[1];\n\n      if (e.shiftKey) {\n        if (e.key === 'ArrowUp') {\n          _this.setState({\n            size: \"\".concat(value + 10).concat(unit)\n          });\n        } else if (e.key === 'ArrowDown') {\n          _this.setState({\n            size: \"\".concat(value - 10).concat(unit)\n          });\n        }\n      } else {\n        if (e.key === 'ArrowUp') {\n          _this.setState({\n            size: \"\".concat(value + 1).concat(unit)\n          });\n        } else if (e.key === 'ArrowDown') {\n          _this.setState({\n            size: \"\".concat(value - 1).concat(unit)\n          });\n        }\n      }\n    });\n\n    var firstPage = props.pages.filter(function (p) {\n      return p !== 'preview/';\n    })[0];\n    _this.state = {\n      size: '400px',\n      embed: firstPage === '' ? 'index' : firstPage.substring(0, firstPage.length - 1)\n    };\n    _this.frame = React.createRef();\n    return _this;\n  }\n\n  _createClass(EmbedPreview, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      autoInitFrames();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (prevState.embed !== this.state.embed) {\n        this.frame.current.innerHTML = '';\n        this.frame.current.removeAttribute('data-frame-auto-initialized');\n        autoInitFrames();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var basePublishPath = this.props.basePublishPath;\n      var embedName = this.state.embed;\n      var embedPath = this.getPathFromName(embedName);\n      var embedPublishPath = embedName === 'index' ? '' : \"\".concat(embedName, \"/\");\n      return React.createElement(\"div\", {\n        className: classnames('preview', 'container', styles$2.styles)\n      }, React.createElement(Navigation, {\n        appLink: this.props.appLink,\n        appName: this.props.appName,\n        homeLink: this.props.homeLink\n      }, PRESET_SIZES.map(function (_ref) {\n        var size = _ref.size,\n            Icon = _ref.Icon;\n        return React.createElement(\"li\", {\n          key: size,\n          className: \"nav-item\",\n          title: size\n        }, React.createElement(\"button\", {\n          onClick: function onClick() {\n            _this2.setState({\n              size: size\n            });\n          }\n        }, React.createElement(Icon, null)));\n      }), React.createElement(\"input\", {\n        value: this.state.size,\n        onChange: this.onSizeInputChange,\n        onKeyDown: this.onSizeInputKeyDown\n      })), React.createElement(\"div\", {\n        className: \"embed-preview-container\"\n      }, React.createElement(\"div\", {\n        style: {\n          width: this.state.size\n        },\n        \"data-frame-src\": embedPath,\n        className: \"embed-preview\",\n        ref: this.frame\n      })), this.state.options.length > 1 && React.createElement(\"div\", {\n        className: \"embed-select\"\n      }, React.createElement(Select, {\n        label: \"Select an embed...\",\n        options: this.getDisplayOptions(),\n        value: embedPath,\n        placeholder: \"Choose an option\",\n        onChange: this.onSelectEmbed\n      })), React.createElement(\"div\", {\n        className: \"embed-code\"\n      }, React.createElement(\"h3\", {\n        className: \"label\"\n      }, \"Use this embed code...\"), React.createElement(\"textarea\", {\n        rows: \"10\",\n        cols: \"60\",\n        readOnly: true,\n        value: \"<div id='\".concat(embedName, \"-embed' data-frame-src=\\\"https://www.\").concat(path.join('politico.com/', basePublishPath, embedPublishPath), \"\\\"></div><script src=\\\"//unpkg.com/@newswire/frames/dist/index.umd.js\\\"></script><script>window.newswireFrames.autoInitFrames()</script>\")\n      })));\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(props, state) {\n      state.options = getPageOptionsFromProps(props);\n    }\n  }]);\n\n  return EmbedPreview;\n}(React.Component);\n\nEmbedPreview.defaultProps = {\n  appLink: '../',\n  appName: 'Preview',\n  homeLink: '#',\n  pages: [''],\n  basePublishPath: '/'\n};\nEmbedPreview.propTypes = {\n  appLink: PropTypes.string,\n  appName: PropTypes.string,\n  homeLink: PropTypes.string,\n  pages: PropTypes.array,\n  basePublishPath: PropTypes.string\n};\nexport default EmbedPreview;","map":null,"metadata":{},"sourceType":"module"}